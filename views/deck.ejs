<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= query.dataValues.deck_name %>></title>

    <link rel="stylesheet" href ="/css/bootstrap.min.css">
</head>
<body>
    <div class="bg-dark pb-4 text-white">
        <%- include('partials/navbar.ejs') %>
        <%- include('partials/imports.ejs') %>

        <% if (messages.error) { %>
            <div class="text-danger">
                <%= messages.error %>
            </div>
        <% } %>

        <% if (messages.success) { %>
            <div class="text-success">
                <%= messages.success %>
            </div>
        <% } %>
        <div class="bg-dark px-2 text-white">
            <% // Handle ordering the pods %>
            <% query.dataValues.Pods.sort(function(a, b){return a.house_id - b.house_id}) %>
            <h1><img src=<%= "/rsrc/set_" + query.dataValues.set_id + ".png" %> width="4%" height="4%" />  <%= query.dataValues.deck_name %></h1>

            <table data-bs-theme="dark">
                <% // Check if user is logged in %>
                <% if (isLoggedIn) { %>
                    <% // Mine/Not Mine deck buttons %>
                    <tr>
                        <td>
                            <% if (isInCollection) { %>
                                <form action=<%= "/deck/" + query.dataValues.deck_code + "/notmine" %> method="POST">
                                    <button class="py-1 mx-3 btn btn-outline-light" type="submit">Not Mine</button>
                                </form>
                            <% } else { %>
                                <form action=<%= "/deck/" + query.dataValues.deck_code + "/mine" %> method="POST">
                                    <button class="py-1 mx-3 btn btn-outline-light" type="submit">Mine</button>
                                </form>
                            <% } %>
                        </td>

                    </tr>
                    <tr>
                        <% // If deck has no alpha displays requests and button %>
                        <% if (query.dataValues.alpha_score == null) { %>
                            <% // Request alpha score button %>
                            <% if (isInCollection) { %>
                                <% if (user.alpha_requests > 0) { %>
                                    <td>
                                        <form class="pt-3 pb-2" action=<%= "/deck/" + query.dataValues.deck_code + "/alpha" %> method="POST">
                                            <button class="py-1 mx-3 btn btn-outline-warning" type="submit">Request Alpha Score</button>
                                        </form>
                                    </td>
                                <% } %>
                            <% } %>
                        <!--If alpha is pending, say is pending-->
                        <% } else if (query.dataValues.alpha_score == "P" || query.dataValues.alpha_score[0] == "R") { %>
                            <td class="py-2">Alpha score is pending...</td>
                        <% } %>
                    </tr>
                <% } %>

                <% if (query.dataValues.alpha_score != null && query.dataValues.alpha_score != "P" && query.dataValues.alpha_score[0] != "R") { %>
                    <% // Rescore alpha button %>
                    <% if (isLoggedIn && isInCollection) { %>
                        <% if (user.alpha_requests > 0) { %>
                            <tr>
                                <td>
                                    <form class="pt-3 pb-2" action=<%= "/deck/" + query.dataValues.deck_code + "/alpharescore" %> method="POST">
                                        <button class="py-1 mx-3 btn btn-outline-warning" type="submit">Request Alpha Re-Score</button>
                                    </form>
                                </td>
                            </tr>
                        <% } %>
                    <% } %>

                    <td class="py-2 ">Alpha Score: <%= query.dataValues.alpha_score %></td>
                <% } %>

                <% if (query.Token) { %>
                    <% // if the deck has a token, display token %>
                    <td class="py-2">Token:  <%= query.Token.Card.card_name %></td>
                <% } %>
            </table>

            <table class="table table-striped" data-bs-theme="dark">
                <tr>
                    <th></th>
                    <th><img src=<%= "/rsrc/house_" + query.dataValues.house1 + ".png" %> width="40" height="40" /></th>
                    <th><img src=<%= "/rsrc/house_" + query.dataValues.house2 + ".png" %> width="40" height="40" /></th>
                    <th><img src=<%= "/rsrc/house_" + query.dataValues.house3 + ".png" %> width="40" height="40" /></th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <th></th>
                    <th><%= query.dataValues.house_1.house_name %></th>
                    <th><%= query.dataValues.house_2.house_name %></th>
                    <th><%= query.dataValues.house_3.house_name %></th>
                    <th></th>
                    <th>Score</th>
                </tr>

                <tr>
                    <td></td>
                    <% card1_1 = query.dataValues.Pods[1].card_1.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_1.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_1.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_1.Multiple.dataValues.multiples %>
                    <% card1_2 = query.dataValues.Pods[2].card_1.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_1.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_1.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_1.Multiple.dataValues.multiples %>
                    <% card1_3 = query.dataValues.Pods[3].card_1.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_1.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_1.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_1.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-delay="{ show: 100, hide: 100 }" data-bs-placement="top" title="<%= card1_1 %>"><%= query.dataValues.Pods[1].card_1.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card1_2 %>"><%= query.dataValues.Pods[2].card_1.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card1_3 %>"><%= query.dataValues.Pods[3].card_1.card_name %></td>
                    <td></td>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_score + query.dataValues.Pods[1].dataValues.pod_score + query.dataValues.Pods[2].dataValues.pod_score + query.dataValues.Pods[3].dataValues.pod_score %></th>
                </tr>
                <tr>
                    <td></td>
                    <% card2_1 = query.dataValues.Pods[1].card_2.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_2.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_2.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_2.Multiple.dataValues.multiples %>
                    <% card2_2 = query.dataValues.Pods[2].card_2.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_2.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_2.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_2.Multiple.dataValues.multiples %>
                    <% card2_3 = query.dataValues.Pods[3].card_2.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_2.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_2.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_2.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card2_1 %>"><%= query.dataValues.Pods[1].card_2.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card2_2 %>"><%= query.dataValues.Pods[2].card_2.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card2_3 %>"><%= query.dataValues.Pods[3].card_2.card_name %></td>
                    <td></td>
                    <th>Creatures</th>
                </tr>
                <tr>
                    <td></td>
                    <% card3_1 = query.dataValues.Pods[1].card_3.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_3.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_3.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_3.Multiple.dataValues.multiples %>
                    <% card3_2 = query.dataValues.Pods[2].card_3.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_3.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_3.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_3.Multiple.dataValues.multiples %>
                    <% card3_3 = query.dataValues.Pods[3].card_3.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_3.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_3.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_3.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card3_1 %>"><%= query.dataValues.Pods[1].card_3.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card3_2 %>"><%= query.dataValues.Pods[2].card_3.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card3_3 %>"><%= query.dataValues.Pods[3].card_3.card_name %></td>
                    <td></td>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_creatures + query.dataValues.Pods[2].dataValues.pod_creatures + query.dataValues.Pods[3].dataValues.pod_creatures %></th>
                </tr>
                <tr>
                    <td></td>
                    <% card4_1 = query.dataValues.Pods[1].card_4.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_4.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_4.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_4.Multiple.dataValues.multiples %>
                    <% card4_2 = query.dataValues.Pods[2].card_4.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_4.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_4.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_4.Multiple.dataValues.multiples %>
                    <% card4_3 = query.dataValues.Pods[3].card_4.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_4.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_4.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_4.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card4_1 %>"><%= query.dataValues.Pods[1].card_4.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card4_2 %>"><%= query.dataValues.Pods[2].card_4.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card4_3 %>"><%= query.dataValues.Pods[3].card_4.card_name %></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <% card5_1 = query.dataValues.Pods[1].card_5.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_5.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_5.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_5.Multiple.dataValues.multiples %>
                    <% card5_2 = query.dataValues.Pods[2].card_5.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_5.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_5.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_5.Multiple.dataValues.multiples %>
                    <% card5_3 = query.dataValues.Pods[3].card_5.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_5.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_5.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_5.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card5_1 %>"><%= query.dataValues.Pods[1].card_5.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card5_2 %>"><%= query.dataValues.Pods[2].card_5.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card5_3 %>"><%= query.dataValues.Pods[3].card_5.card_name %></td>
                    <td></td>
                    <th>Actions</th>
                </tr>
                <tr>
                    <td></td>
                    <% card6_1 = query.dataValues.Pods[1].card_6.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_6.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_6.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_6.Multiple.dataValues.multiples %>
                    <% card6_2 = query.dataValues.Pods[2].card_6.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_6.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_6.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_6.Multiple.dataValues.multiples %>
                    <% card6_3 = query.dataValues.Pods[3].card_6.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_6.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_6.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_6.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card6_1 %>"><%= query.dataValues.Pods[1].card_6.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card6_2 %>"><%= query.dataValues.Pods[2].card_6.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card6_3 %>"><%= query.dataValues.Pods[3].card_6.card_name %></td>
                    <td></td>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_actions + query.dataValues.Pods[2].dataValues.pod_actions + query.dataValues.Pods[3].dataValues.pod_actions %></th>
                </tr>
                <tr>
                    <td></td>
                    <% card7_1 = query.dataValues.Pods[1].card_7.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_7.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_7.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_7.Multiple.dataValues.multiples %>
                    <% card7_2 = query.dataValues.Pods[2].card_7.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_7.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_7.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_7.Multiple.dataValues.multiples %>
                    <% card7_3 = query.dataValues.Pods[3].card_7.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_7.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_7.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_7.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card7_1 %>"><%= query.dataValues.Pods[1].card_7.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card7_2 %>"><%= query.dataValues.Pods[2].card_7.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card7_3 %>"><%= query.dataValues.Pods[3].card_7.card_name %></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <% card8_1 = query.dataValues.Pods[1].card_8.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_8.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_8.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_8.Multiple.dataValues.multiples %>
                    <% card8_2 = query.dataValues.Pods[2].card_8.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_8.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_8.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_8.Multiple.dataValues.multiples %>
                    <% card8_3 = query.dataValues.Pods[3].card_8.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_8.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_8.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_8.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card8_1 %>"><%= query.dataValues.Pods[1].card_8.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card8_2 %>"><%= query.dataValues.Pods[2].card_8.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card8_3 %>"><%= query.dataValues.Pods[3].card_8.card_name %></td>
                    <td></td>
                    <th>Artifacts</th>
                </tr>
                <tr>
                    <td></td>
                    <% card9_1 = query.dataValues.Pods[1].card_9.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_9.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_9.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_9.Multiple.dataValues.multiples %>
                    <% card9_2 = query.dataValues.Pods[2].card_9.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_9.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_9.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_9.Multiple.dataValues.multiples %>
                    <% card9_3 = query.dataValues.Pods[3].card_9.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_9.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_9.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_9.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card9_1 %>"><%= query.dataValues.Pods[1].card_9.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card9_2 %>"><%= query.dataValues.Pods[2].card_9.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card9_3 %>"><%= query.dataValues.Pods[3].card_9.card_name %></td>
                    <td></td>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_artifacts + query.dataValues.Pods[2].dataValues.pod_artifacts + query.dataValues.Pods[3].dataValues.pod_artifacts %></th>
                </tr>
                <tr>
                    <td></td>
                    <% card10_1 = query.dataValues.Pods[1].card_10.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_10.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_10.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_10.Multiple.dataValues.multiples %>
                    <% card10_2 = query.dataValues.Pods[2].card_10.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_10.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_10.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_10.Multiple.dataValues.multiples %>
                    <% card10_3 = query.dataValues.Pods[3].card_10.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_10.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_10.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_10.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card10_1 %>"><%= query.dataValues.Pods[1].card_10.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card10_2 %>"><%= query.dataValues.Pods[2].card_10.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card10_3 %>"><%= query.dataValues.Pods[3].card_10.card_name %></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <% card11_1 = query.dataValues.Pods[1].card_11.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_11.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_11.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_11.Multiple.dataValues.multiples %>
                    <% card11_2 = query.dataValues.Pods[2].card_11.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_11.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_11.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_11.Multiple.dataValues.multiples %>
                    <% card11_3 = query.dataValues.Pods[3].card_11.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_11.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_11.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_11.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card11_1 %>"><%= query.dataValues.Pods[1].card_11.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card11_2 %>"><%= query.dataValues.Pods[2].card_11.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card11_3 %>"><%= query.dataValues.Pods[3].card_11.card_name %></td>
                    <td></td>
                    <th>Upgrades</th>
                </tr>
                <tr>
                    <td></td>
                    <% card12_1 = query.dataValues.Pods[1].card_12.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[1].card_12.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[1].card_12.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[1].card_12.Multiple.dataValues.multiples %>
                    <% card12_2 = query.dataValues.Pods[2].card_12.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[2].card_12.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[2].card_12.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[2].card_12.Multiple.dataValues.multiples %>
                    <% card12_3 = query.dataValues.Pods[3].card_12.card_name + "\nScore: " + card_info['scoring_dict'][card_info['card_setnum_to_abbrev'][Math.abs(query.dataValues.Pods[3].card_12.card_id).toString().slice(0, -3)]][card_info['card_id_to_name'][query.dataValues.Pods[3].card_12.card_id]]['score'] + "\nMultiples: + " + query.dataValues.Pods[3].card_12.Multiple.dataValues.multiples %>

                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card12_1 %>"><%= query.dataValues.Pods[1].card_12.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card12_2 %>"><%= query.dataValues.Pods[2].card_12.card_name %></td>
                    <td data-bs-toggle="tooltip" data-bs-placement="top" title="<%= card12_3 %>"><%= query.dataValues.Pods[3].card_12.card_name %></td>
                    <td></td>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_upgrades + query.dataValues.Pods[2].dataValues.pod_upgrades + query.dataValues.Pods[3].dataValues.pod_upgrades %></th>
                </tr>

                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <th>Values</th>
                    <th><%= query.dataValues.house_1.house_name %> score</th>
                    <th><%= query.dataValues.house_2.house_name %> score</th>
                    <th><%= query.dataValues.house_3.house_name %> score</th>
                    <th>Meta Score</th>
                    <th>Totals</th>
                    <th></th>
                </tr>
                <tr>
                    <th>Score</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_score %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_score %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_score %></th>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_score || '' %></th>
                    <td></td>
                    <th style="text-align:left">Score</th>
                </tr>
                <tr>
                    <th>E</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_e %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_e %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_e %></th>
                    <th><%= parseInt(query.dataValues.Pods[0].dataValues.pod_e) || '' %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_e) + parseInt(query.dataValues.Pods[2].dataValues.pod_e) + parseInt(query.dataValues.Pods[3].dataValues.pod_e) + parseInt(query.dataValues.Pods[0].dataValues.pod_e) %></th>
                    <th style="text-align:left">E</th>
                </tr>
                <tr>
                    <th>A</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_a %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_a %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_a %></th>
                    <th><%= parseInt(query.dataValues.Pods[0].dataValues.pod_a) || '' %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_a) + parseInt(query.dataValues.Pods[2].dataValues.pod_a) + parseInt(query.dataValues.Pods[3].dataValues.pod_a) + parseInt(query.dataValues.Pods[0].dataValues.pod_a) %></th>
                    <th style="text-align:left">A</th>
                </tr>
                <tr>
                    <th>C</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_c %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_c %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_c %></th>
                    <th><%= parseInt(query.dataValues.Pods[0].dataValues.pod_c) || '' %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_c) + parseInt(query.dataValues.Pods[2].dataValues.pod_c) + parseInt(query.dataValues.Pods[3].dataValues.pod_c) + parseInt(query.dataValues.Pods[0].dataValues.pod_c) %></th>
                    <th style="text-align:left">C</th>
                </tr>
                <tr>
                    <th>F</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_f %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_f %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_f %></th>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_f %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_f || 0) + parseInt(query.dataValues.Pods[2].dataValues.pod_f || 0) + parseInt(query.dataValues.Pods[3].dataValues.pod_f || 0) + parseInt(query.dataValues.Pods[0].dataValues.pod_f || 0) %></th>
                    <th style="text-align:left">F</th>
                </tr>
                <tr>
                    <th>D</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_d %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_d %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_d %></th>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_d %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_d || 0) + parseInt(query.dataValues.Pods[2].dataValues.pod_d || 0) + parseInt(query.dataValues.Pods[3].dataValues.pod_d || 0) + parseInt(query.dataValues.Pods[0].dataValues.pod_d || 0) %></th>
                    <th style="text-align:left">D</th>
                </tr>
                <tr>
                    <th>R</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_r %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_r %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_r %></th>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_r %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_r || 0) + parseInt(query.dataValues.Pods[2].dataValues.pod_r || 0) + parseInt(query.dataValues.Pods[3].dataValues.pod_r || 0) + parseInt(query.dataValues.Pods[0].dataValues.pod_r || 0) %></th>
                    <th style="text-align:left">R</th>
                </tr>
                <tr>
                    <th>BoB</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_bob %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_bob %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_bob %></th>
                    <th><%= parseInt(query.dataValues.Pods[0].dataValues.pod_bob) || '' %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_bob) + parseInt(query.dataValues.Pods[2].dataValues.pod_bob) + parseInt(query.dataValues.Pods[3].dataValues.pod_bob) + parseInt(query.dataValues.Pods[0].dataValues.pod_bob) %></th>
                    <th style="text-align:left">BoB</th>
                </tr>
                <tr>
                    <th>Scaling A</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_scaling_a %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_scaling_a %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_scaling_a %></th>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_scaling_a %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_scaling_a || 0) + parseInt(query.dataValues.Pods[2].dataValues.pod_scaling_a || 0) + parseInt(query.dataValues.Pods[3].dataValues.pod_scaling_a || 0) + parseInt(query.dataValues.Pods[0].dataValues.pod_scaling_a || 0) %></th>
                    <th style="text-align:left">Scaling A</th>
                </tr>
                <tr>
                    <th>Wipes</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_wipes %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_wipes %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_wipes %></th>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_wipes %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_wipes || 0) + parseInt(query.dataValues.Pods[2].dataValues.pod_wipes || 0) + parseInt(query.dataValues.Pods[3].dataValues.pod_wipes || 0) + parseInt(query.dataValues.Pods[0].dataValues.pod_wipes || 0) %></th>
                    <th style="text-align:left">Wipes</td>
                </tr>
                <tr>
                    <th>Cheats</th>
                    <th><%= query.dataValues.Pods[1].dataValues.pod_cheats %></th>
                    <th><%= query.dataValues.Pods[2].dataValues.pod_cheats %></th>
                    <th><%= query.dataValues.Pods[3].dataValues.pod_cheats %></th>
                    <th><%= query.dataValues.Pods[0].dataValues.pod_cheats %></th>
                    <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_cheats || 0) + parseInt(query.dataValues.Pods[2].dataValues.pod_cheats || 0) + parseInt(query.dataValues.Pods[3].dataValues.pod_cheats || 0) + parseInt(query.dataValues.Pods[0].dataValues.pod_cheats || 0) %></th>
                    <th style="text-align:left">Cheats</td>
                </tr>
                <% if (query.Token) { %>
                    <% // Only show the tokens row if a deck has token creators %>
                    <tr>
                        <th>Tokens</th>
                        <th><%= query.dataValues.Pods[1].dataValues.pod_tokens %></th>
                        <th><%= query.dataValues.Pods[2].dataValues.pod_tokens %></th>
                        <th><%= query.dataValues.Pods[3].dataValues.pod_tokens %></th>
                        <th><%= query.dataValues.Pods[0].dataValues.pod_tokens %></th>
                        <th><%= parseInt(query.dataValues.Pods[1].dataValues.pod_tokens) + parseInt(query.dataValues.Pods[2].dataValues.pod_tokens) + parseInt(query.dataValues.Pods[3].dataValues.pod_tokens) + parseInt(query.dataValues.Pods[0].dataValues.pod_tokens || 0) %></th>
                        <th style="text-align:left">Tokens</th>
                    </tr>
                <% } %>
            </table>
        
            <% // Parse attributes %>
            <% var attributes = JSON.parse(query.dataValues.attributes) %>

            <% if (attributes) { %>
                <h3>Meta Score Adjustments</h3>
                <% for (var key in attributes) { %>
                    <h5><%= key %> score: <%= attributes[key] %></h5>
                <% } %>
            <% } %>
        </div>
    </div>



    <script src="/js/bootstrap.bundle.min.js">
        // Enable tooltips
        $(document).ready(function(){
            $('[data-bs-toggle="tooltip"]').tooltip();   
        });
    </script>
</body>
</html>


